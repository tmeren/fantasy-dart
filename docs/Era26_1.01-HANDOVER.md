# SESSION HANDOVER: Era-26_1.01

## 1. Session Identity

| Field | Value |
|-------|-------|
| **Session ID** | Era-26_1.01 |
| **Era** | Era 26: SP16 Fantasy Dart — Tournament Betting Platform |
| **Jira Epic** | M2-6008 |
| **Jira Task** | M2-6009: T1 Session Setup & Project Assessment |
| **Date** | 2026-02-11 |
| **Status** | COMPLETE |

---

## 2. Session Objectives & Outcomes

### 2.1 Objectives
1. Locate and inventory all Fantasy Dart project files (previously scattered in MAGUS monorepo)
2. Review 10 deep research documents (football betting) for darts applicability
3. Set up Jira Era with detailed subtasks for full project lifecycle
4. Create handover document for future sessions

### 2.2 Outcomes

| Objective | Status | Evidence |
|-----------|--------|----------|
| File inventory | DONE | SP16-fantasy-dart/ folder with 3 subdirs located |
| Research review | DONE | 10 docs analyzed, applicability matrix created |
| Jira Era setup | DONE | M2-6008 Epic + 10 Tasks (M2-6009 to M2-6018) |
| Handover | DONE | This document |

---

## 3. Project Inventory

### 3.1 Folder Structure
```
side-projects/SP16-fantasy-dart/
├── 00_DeepSearch/              # 10 football betting research .docx files (85K+ chars total)
│   ├── 1. Final Output Requirement for Bet-GPT Agent.docx
│   ├── 2. In-Play Slip Logic Captured for Bet-GPT.docx
│   ├── 3. Full Specification Report_ Bet-GPT Agent.docx
│   ├── 4. EXPECTED OUTPUT FILES FROM DEEP RESEARCH.docx
│   ├── 5. FINAL RESEARCH PROMPT FOR BET-GPT DEVELOPMENT.docx
│   ├── 6. Football Betting-Deepsearch.docx          # MAIN: 85K chars, comprehensive
│   ├── 7. GPT Football Prediction Agent Setup.docx
│   ├── 8. PRE-CONFIGURATION PREPARATION.docx
│   ├── 9. Final Agent Configuration for Precision Mode.docx
│   └── 9. PRE-CONFIGURATION PREPARATION.part-1.docx
├── darts-betting/              # Fantasy Betting Web App
│   ├── Dockerfile
│   ├── README.md
│   ├── backend/                # FastAPI backend (6 files)
│   │   ├── main.py             # FastAPI app: auth, markets, bets, WebSocket
│   │   ├── database.py         # SQLite (aiosqlite)
│   │   ├── schemas.py          # Pydantic models
│   │   ├── seed_markets.py     # Pre-seeded 8 players + QF bracket + props
│   │   ├── requirements.txt    # FastAPI, uvicorn, aiosqlite, jwt, websockets
│   │   └── railway.json        # Railway deployment config
│   └── frontend/               # Next.js 14 frontend (13 files)
│       ├── pages/              # 7 pages: index, dashboard, markets, [id], leaderboard, activity, admin
│       ├── lib/api.ts          # API client proxying to BACKEND_URL
│       ├── package.json        # Next.js 14, React 18, Tailwind
│       ├── tailwind.config.js
│       ├── next.config.js      # Rewrites /api → backend
│       ├── vercel.json         # Vercel deployment config
│       └── .env.example
├── darts-predictor/            # Match Prediction Engine (CLI)
│   ├── match_data.py           # 380 real matches, 38 rounds, 20 players
│   └── predictor.py            # Elo ratings + Monte Carlo bracket simulation
└── docs/
    └── Era26_1.01-HANDOVER.md  # This file
```

### 3.2 Current Tech Stack

| Component | Technology | Status |
|-----------|-----------|--------|
| Backend API | FastAPI + Uvicorn | Code exists, hosting dead |
| Database | SQLite (aiosqlite) | Ephemeral on Railway = data loss |
| Auth | Email-only login (no password) | Insecure |
| Frontend | Next.js 14 + React 18 + Tailwind | Code exists, Vercel 401 |
| Real-time | WebSocket live activity feed | Implemented |
| Prediction | Python Elo + Monte Carlo | Working CLI tool |
| Deployment | Railway (backend) + Vercel (frontend) | Both dead |

### 3.3 Pre-Seeded Data (Current — STALE)

**8 Players with odds:**

| Player | Odds | Seed |
|--------|------|------|
| Berkay Alpagot | 3.00 | 1 |
| Alican Donerkaya | 4.75 | 2 |
| Ekin Isik | 8.00 | 3 |
| Seckin Civan | 9.50 | 4 |
| Muzaffer Akin | 9.50 | 5 |
| Erkut Yaltkaya | 10.00 | 6 |
| Baran Yildiz | 10.50 | 7 |
| Ece Saritepe | 55.00 | 8 |

**Predictor data (from 380 matches):**

| Player | W-L | Diff | Notes |
|--------|-----|------|-------|
| Berkay | 25-4 | +45 | Dominant #1 |
| Alican | 23-6 | +41 | Strong #2 |
| Seckin | 20-9 | +28 | |
| Ekin | 20-8 | +26 | |
| Baran | 20-9 | +25 | |

### 3.4 Known Issues (Critical)

| Issue | Severity | Root Cause |
|-------|----------|------------|
| Backend down | P0 | Railway free tier — process killed after inactivity |
| Data loss on redeploy | P0 | SQLite on ephemeral filesystem |
| Vercel returns 401 | P0 | Backend unreachable → API proxy fails |
| SECRET_KEY random on restart | P1 | `os.urandom()` fallback invalidates all JWTs |
| CORS wildcard (*) | P1 | Security risk |
| No password auth | P1 | Email-only login, anyone can claim any email |
| Odds are stale | P2 | Pre-seeded from old data, not recalculated |
| No mobile testing | P2 | Responsive design unverified |
| Tournament: challonge.com/9sgjwbl9 | INFO | Source of truth for current standings |

---

## 4. Research Applicability Matrix

### 4.1 Football → Darts Mapping

| Research Concept | Applicable? | Darts Adaptation |
|-----------------|-------------|------------------|
| **Poisson model** | YES | Model expected legs won per match |
| **Monte Carlo simulation** | YES | Already in predictor — bracket prediction |
| **Elo ratings** | YES | Already in predictor — 380 matches of data |
| **Overround/margin calc** | YES | Target 105-110% for main markets |
| **Kelly Criterion** | YES | Universal staking math |
| **Cash-out / hedging** | YES | Feature for bet management UI |
| **Market-making / liability** | YES | Admin panel balanced book visibility |
| **Dixon-Coles correlation** | PARTIAL | Low-score correction for close matches |
| **Bayesian updating** | PARTIAL | Update odds as tournament progresses (between rounds, not in-play) |
| **xG (Expected Goals)** | NO | No shot-level data for amateur darts |
| **In-play / live feeds** | NO | No live scoring API |
| **Sportradar / data providers** | NO | Amateur event |
| **Weather / pitch conditions** | NO | N/A |
| **BTTS / Asian handicaps** | NO | Football-specific |
| **Exchange dynamics** | NO | Single book, not exchange |

### 4.2 Research Gaps (Need Additional Research)

1. **Darts-specific Elo K-factor** — Current predictor uses generic K, needs tuning for darts volatility
2. **Knockout stage adjustment** — Players may perform differently under elimination pressure
3. **8-player outright overround** — How to distribute margin across 8 outcomes fairly
4. **Darts prop markets** — 180s, checkout %, highest finish (if data exists)
5. **Amateur tournament dynamics** — Fatigue, bracket seeding effects, home throw advantage

---

## 5. Jira State

### Epic: M2-6008 — Era 26: SP16 Fantasy Dart [In Progress]

| # | Key | Task | Status |
|---|-----|------|--------|
| 1 | M2-6009 | Session Setup & Project Assessment | In Progress (this session) |
| 2 | M2-6010 | Deep Research Review — Bookmaking Odds Applicability | Backlog |
| 3 | M2-6011 | Create Standalone GitHub Repo | Backlog |
| 4 | M2-6012 | Update Tournament Data & Player Roster | Backlog |
| 5 | M2-6013 | Implement Bookmaking Odds Engine | Backlog |
| 6 | M2-6014 | Backend Infrastructure Overhaul | Backlog |
| 7 | M2-6015 | Seed Markets with Calibrated Odds | Backlog |
| 8 | M2-6016 | Frontend UI/UX Overhaul | Backlog |
| 9 | M2-6017 | Deployment & Domain Setup | Backlog |
| 10 | M2-6018 | Testing & Go-Live | Backlog |

### Task Dependencies (Recommended Execution Order)

```
T1 (Setup) ──→ T2 (Research Review) ──→ T5 (Odds Engine)
                                            ↓
T3 (GitHub Repo) ──→ T6 (Backend Overhaul) ──→ T7 (Seed Markets)
                                                    ↓
T4 (Tournament Data) ────────────────────────→ T7 (Seed Markets)
                                                    ↓
                     T8 (Frontend UI/UX) ──→ T9 (Deploy) ──→ T10 (Go-Live)
```

**Critical path:** T1 → T4 + T5 (parallel) → T6 → T7 → T9 → T10
**Parallelizable:** T2 + T3 + T4 can run concurrently after T1

---

## 6. Next Session Actions (Era-26_1.02)

### 6.1 Immediate (User provides updated tournament data)
1. **User provides** current Challonge bracket state, latest standings, any roster changes
2. **Update match_data.py** with current tournament results
3. **Recalculate Elo ratings** with updated data
4. **Start T5** — odds engine implementation using Poisson + Elo

### 6.2 Decision Required
1. **Hosting choice:** VPS ($5 Hetzner) vs Vercel+Railway ($5) vs free tier (Render/Fly.io)
2. **Custom domain:** Purchase one? (e.g., fantasydarts.app or similar)
3. **Scope of research extension:** Do you want deeper darts-specific research before building odds engine?
4. **Props markets:** Include 180s/checkout/highest finish markets? (requires additional player stat data)

---

## 7. Files Modified

| File | Action |
|------|--------|
| `side-projects/SP16-fantasy-dart/docs/Era26_1.01-HANDOVER.md` | Created: this handover |

---

## 8. Session Notes

- Bash tool was completely dead in previous session (every command returned exit code 1). Restarting Claude Code resolved it.
- `.docx` files readable via `python-docx` library (pre-installed).
- Main research doc is `6. Football Betting-Deepsearch.docx` (85K chars) — comprehensive coverage of odds models, pricing engines, xG, staking theory, live scenarios, and market inefficiencies.
- The other 9 docs are GPT agent configuration/prompt engineering docs from a Bet-GPT project — less relevant to the darts platform itself but contain useful prompt patterns.

---

**Session Status:** COMPLETE
**Handover Author:** Claude Opus 4.6 (pm-agent)
